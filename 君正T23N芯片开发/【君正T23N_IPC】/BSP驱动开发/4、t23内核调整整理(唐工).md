
### config配置文件

> [!abstract] 位置
> 君正T23N芯片开发/sdk_资料库/其他资料/kernel_config_20250421


### 编译脚本调整
需要关闭默认内核配置，注释掉make ${CONFIG_T23}和checkreturn "make kernel"两句
然后把当前配置文件覆盖 ~/zeratul_t23_release_20231207/os/kernel/.config

```
make_kernel(){
        echo make kernel
        echo ${ISVP_ENV_KERNEL_DIR}
        cd ${ISVP_ENV_KERNEL_DIR}
        #make ${CONFIG_T23}
        #checkreturn "make kernel"
        make uImage -j8
        checkreturn "make kernel"
        cp arch/mips/boot/uImage $OUT
}
```

。在arch/mips/configs/ 文件夹下存放了内核的板机配置文件；T23 芯片板级文
件为isvp_pike_defconfig。


### 调试功能
General setup标签
打开了
Kernel->user space relay support (formerly relayfs)
Kernel Performance Events And Counters  --->
Profiling support 
 以供调试使用
![君正T23N芯片开发/【君正T23N\_IPC】/BSP驱动开发/assets/4、t23内核调整整理(唐工)/file-20250810171417438.png](assets/4、t23内核调整整理(唐工)/file-20250810171417438.png)

```
  (mips-linux-gnu-) Cross-compiler tool prefix                                                                                     │ │
  │ │                                                           (__isvp_pike_1.0__) Local version - append to kernel release                                                                     │ │
  │ │                                                        
     [ ] Automatically append version information to the version string                                                               │ │
  │ │                                                           
      Kernel compression mode (LZMA)  --->                                                                                         │ │
  │ │                                                       
      ((none)) Default hostname                                                                                                        │ │
  │ │                                                        
     [*] Support for paging of anonymous memory (swap)                                                                                │ │
  │ │                                                          
   [*] System V IPC                                                                                                                 │ │
  │ │                                                          
   [ ] POSIX Message Queues                                                                                                         │ │
  │ │                                                         
    [ ] open by fhandle syscalls                                                                                                     │ │
  │ │                                                          
   [ ] Auditing support                                                                                                             │ │
  │ │                                                            
     IRQ subsystem  --->                                                                                                          │ │
  │ │                                                              
   Timers subsystem  --->                                                                                                       │ │
  │ │                                                             
  CPU/Task time and stats accounting  --->                                                                                     │ │
  │ │                                                           
      RCU Subsystem  --->                                                                                                          │ │
  │ │                                                         
    < > Kernel .config support                                                                                                       │ │
  │ │                                                          
   (16) Kernel log buffer size (16 => 64KB, 17 => 128KB)                                                                            │ │
  │ │                                                          
   [*] Control Group support  --->                                                                                                  │ │
  │ │                                                          
   [ ] Checkpoint/restore support                                                                                                   │ │
  │ │                                                          
   [ ] Namespaces support  --->                                                                                                     │ │
  │ │                                                          
   [ ] Require conversions between uid/gids and their internal representation                                                       │ │
  │ │                                                         
    [ ] Automatic process group scheduling                                                                                           │ │
  │ │                                                         
    [ ] Enable deprecated sysfs features to support old userspace tools                                                              │ │
  │ │                                                           
  [*] Kernel->user space relay support (formerly relayfs)                                                                          │ │
  │ │                                                           
  [ ] Initial RAM filesystem and RAM disk (initramfs/initrd) support                                                               │ │
  │ │                                                           
  [*] Optimize for size                                                                                                            │ │
  │ │                                                           
  (3) Default panic timeout                                                                                                        │ │
  │ │                                                          
   -*- Configure standard kernel features (expert users)  --->                                                                      │ │
  │ │                                                          
   [*] Embedded system                                                                                                              │ │
  │ │                                                              
   Kernel Performance Events And Counters  --->                                                                                 │ │
  │ │                                                          
   [*] Enable VM event counters for /proc/vmstat                                                                                    │ │
  │ │                                                          
   [ ] Enable SLUB debugging support                                                                                                │ │
  │ │                                                           
  [ ] Disable heap randomization                                                                                                   │ │
  │ │                                                              
   Choose SLAB allocator (SLUB (Unqueued Allocator))  --->                                                                      │ │
  │ │                                                           
  [*] Profiling support                                                                                                            │ │
  │ │                                                           
  < > OProfile system profiling                                                                                                    │ │
  │ │                                                           
  [ ] Kprobes                                                                                                                      │ │
  │ │                                                           
  [ ] Optimize very unlikely/likely branches                                                                                       │ │
  │ │                                                              
   GCOV-based kernel profiling  --->     
```


###  Networking support 标签
打开8011选项
![君正T23N芯片开发/【君正T23N\_IPC】/BSP驱动开发/assets/4、t23内核调整整理(唐工)/file-20250810171417638.png](assets/4、t23内核调整整理(唐工)/file-20250810171417638.png)

```
Symbol: LIB80211 [=y]                                                               │
  │ Type  : tristate                                                                    │
  │   Defined at net/wireless/Kconfig:142                                               │
  │   Depends on: NET [=y] && WIRELESS [=y]                                             │
  │   Selected by: HOSTAP [=y] && NETDEVICES [=y] && WLAN [=y] || IPW2100 [=n] && NETDE │
  │                                                                                     │
  │                                                                                     │
  │ Symbol: LIB80211_CRYPT_WEP [=y]                                                     │
  │ Type  : tristate                                                                    │
  │   Defined at net/wireless/Kconfig:151                                               │
  │   Depends on: NET [=y] && WIRELESS [=y]                                             │
  │   Selected by: HOSTAP [=y] && NETDEVICES [=y] && WLAN [=y] || LIBIPW [=n] && NETDEV │
  │                                                                                     │
  │                                                                                     │
  │ Symbol: LIB80211_CRYPT_CCMP [=y]                                                    │
  │ Type  : tristate                                                                    │
  │   Defined at net/wireless/Kconfig:154                                               │
  │   Depends on: NET [=y] && WIRELESS [=y]                                             │
  │   Selected by: HOSTAP [=y] && NETDEVICES [=y] && WLAN [=y] || LIBIPW [=n] && NETDEV │
  │                                                                                     │
  │                                                                                     │
  │ Symbol: LIB80211_CRYPT_TKIP [=y]                                                    │
  │ Type  : tristate                                                                    │
  │   Defined at net/wireless/Kconfig:157                                               │
  │   Depends on: NET [=y] && WIRELESS [=y]                                             │
  │   Selected by: HOSTAP [=y] && NETDEVICES [=y] && WLAN [=y] || LIBIPW [=n] && NETDEV 

```
LIB80211 库，或称为 IEEE 802.11 标准支持库
LIB80211 是一个用于实现和管理无线网络（特别是基于 IEEE 802.11 标准的 Wi-Fi 网络）功能的软件库。它提供了对无线网络协议栈中数据链路层（MAC 层）的支持，使得开发者能够更容易地在他们的应用或系统中集成 Wi-Fi 功能。




###  优盘
如需优盘，打开如下
Device Drivers标签
SCSI device support
SCSI disk support

Device Drivers > USB support标签
```
 <*>     USB Mass Storage support                                            │ │
  │ │     [ ]       USB Mass Storage verbose debug                                    │ │
  │ │     < >       Realtek Card Reader support                                       │ │
  │ │     < >       Datafab Compact Flash Reader support                              │ │
  │ │     < >       Freecom USB/ATAPI Bridge support                                  │ │
  │ │     < >       ISD-200 USB/ATA Bridge support                                    │ │
  │ │     < >       USBAT/USBAT02-based storage support                               │ │
  │ │     < >       SanDisk SDDR-09 (and other SmartMedia, including DPCM) support    │ │
  │ │     < >       SanDisk SDDR-55 SmartMedia support                                │ │
  │ │     < >       Lexar Jumpshot Compact Flash Reader                               │ │
  │ │     < >       Olympus MAUSB-10/Fuji DPC-R1 support                              │ │
  │ │     < >       Support OneTouch Button on Maxtor Hard Drives                     │ │
  │ │     < >       Support for Rio Karma music player                                │ │
  │ │     < >       SAT emulation on Cypress USB/ATA Bridge with ATACB                │ │
  │ │     < >       USB ENE card reader support                                       │ │
  │ │     <*>   DesignWare USB2 DRD Core Support               
```

### 以太网
如果不需要网络，关闭jzmac
> Device Drivers > Network device support > Ethernet driver support
![君正T23N芯片开发/【君正T23N\_IPC】/BSP驱动开发/assets/4、t23内核调整整理(唐工)/file-20250810171417728.png](assets/4、t23内核调整整理(唐工)/file-20250810171417728.png)
### usb网卡
```
Device Drivers > Network device support > USB Network Adapters
 < > USB CATC NetMate-based Ethernet device support                          │ │
  │ │     < > USB KLSI KL5USB101-based ethernet device support                        │ │
  │ │     < > USB Pegasus/Pegasus-II based ethernet device support                    │ │
  │ │     < > USB RTL8150 based ethernet device support                               │ │
  │ │     < > Realtek RTL8152 Based USB 2.0 Ethernet Adapters                         │ │
  │ │     <*> Multi-purpose USB Networking Framework                                  │ │
  │ │     < >   ASIX AX88xxx Based USB 2.0 Ethernet Adapters                          │ │
  │ │     < >   ASIX AX88179/178A USB 3.0/2.0 to Gigabit Ethernet                     │ │
  │ │     -*-   CDC Ethernet support (smart devices such as cable modems)             │ │
  │ │     < >   CDC EEM support                                                       │ │
  │ │     <*>   CDC NCM support                                                       │ │
  │ │     < >   CDC MBIM support                                                      │ │
  │ │     < >   Davicom DM9601 based USB 1.1 10/100 ethernet devices                  │ │
  │ │     < >   SMSC LAN75XX based USB 2.0 gigabit ethernet devices                   │ │
  │ │     < >   SMSC LAN95XX based USB 2.0 10/100 ethernet devices                    │ │
  │ │     < >   GeneSys GL620USB-A based cables                                       │ │
  │ │     <*>   NetChip 1080 based cables (Laplink, ...)                              │ │
  │ │     < >   Prolific PL-2301/2302/25A1 based cables                               │ │
  │ │     < >   MosChip MCS7830 based Ethernet adapters                               │ │
  │ │     < >   Host for RNDIS and ActiveSync devices                                 │ │
  │ │     <*>   Simple USB Network Links (CDC Ethernet subset)                        │ │
  │ │     [ ]     ALi M5632 based 'USB 2.0 Data Link' cables                          │ │
  │ │     [ ]     AnchorChips 2720 based cables (Xircom PGUNET, ...)                  │ │
  │ │     [ ]     eTEK based host-to-host cables (Advance, Belkin, ...)               │ │
  │ │     [*]     Embedded ARM Linux links (iPaq, ...)                                │ │
  │ │     [ ]     Epson 2888 based firmware (DEVELOPMENT)                             │ │
  │ │     [ ]     KT Technology KC2190 based cables (InstaNet)                        │ │
  │ │     <*>   Sharp Zaurus (stock ROMs) and compatible                              │ │
  │ │     < >   Conexant CX82310 USB ethernet port                                    │ │
  │ │     < >   Samsung Kalmia based LTE USB modem                                    │ │
  │ │     < >   QMI WWAN driver for Qualcomm MSM based 3G and LTE modems              │ │
  │ │     < > Intellon PLC based usb adapter                                          │ │
  │ │     < > Apple iPhone USB Ethernet driver                                        │ │
  │ │     < > USB-to-WWAN Driver for Sierra Wireless modems                           │ │
  │ │     < > LG VL600 modem dongle                      
```

### iic
Device Drivers > I2C support标签
```
     --- I2C support                                                             │ │
  │ │     [*]   Enable compatibility bits for old user-space                          │ │
  │ │     <*>   I2C device interface                                                  │ │
  │ │     < >   I2C bus multiplexing support                                          │ │
  │ │     [*]   Autoselect pertinent helper modules                                   │ │
  │ │           I2C Hardware Bus support  --->                                        │ │
  │ │     < >   I2C/SMBus Test Stub                                                   │ │
  │ │     [ ]   I2C Core debugging messages                                           │ │
  │ │     [ ]   I2C Algorithm debugging messages                                      │ │
  │ │     [ ]   I2C Bus debugging messages                                            
```

 Device Drivers > I2C support > I2C Hardware Bus support标签
```
    *** I2C system bus drivers (mostly embedded / system-on-chip) ***       │ │
  │ │     < > CBUS I2C driver                                                         │ │
  │ │     < > Synopsys DesignWare Platform                                            │ │
  │ │     <*> GPIO-based bitbanging I2C                                               │ │
  │ │     < > OpenCores I2C Controller                                                │ │
  │ │     < > PCA9564/PCA9665 as platform device                                      │ │
  │ │     < > Simtec Generic I2C interface                                            │ │
  │ │     < > Xilinx I2C Controller                                                   │ │
  │ │     <*> Ingenic SoC based on Xburst arch's I2C controler Driver support         │ │
  │ │     (64)  JZ_V12 I2C Controller FIFO length                                     │ │
  │ │     [ ]   enable or disable Ingenic Soc's I2C driver debug info                 │ │
  │ │     [ ] soft gpio for i2c0 Interface support                                    │ │
  │ │     <*> JZ_v12 i2c controler 0 Interface support                                │ │
  │ │           JZ_v12 i2c controler 0 function pins select (GPIO_PA12 & GPIO_PA13)  -│ │
  │ │     [ ]   controler i2c0 no restart mode                                        │ │
  │ │     (400) Jz_v12 i2c0 speed in KHZ                                              │ │
  │ │     [ ] soft gpio for i2c1 Interface support                                    │ │
  │ │     < > JZ_v12 i2c controler 1 Interface support                                │ │
  │ │     [ ] soft gpio for i2c2 Interface support                                    │ │
  │ │     <*> JZ_v12 i2c controler 2 Interface support                                │ │
  │ │           JZ_v12 i2c controler 2 function pins select (GPIO_PB20 & GPIO_PB21)  -│ │
  │ │     (400) Jz_v12 i2c2 speed in KHZ                                              │ │
  │ │     [ ] controler i2c2 no restart mode                                          │ │
  │ │     (1000) JZ i2c bus wait timeout in ms                                        │ │
  │ │         *** External I2C/SMBus adapter drivers ***                              │ │
  │ │     < > Diolan U2C-12 USB adapter                                               │ │
  │ │     < > Parallel port adapter (light)                                           │ │
  │ │     < > TAOS evaluation module                                                  │ │
  │ │     < > Tiny-USB adapter                                                        │ │
  │ │         *** Other I2C/SMBus bus drivers ***          
```
根据需求选择硬件 i2c 或者软件 i2c；硬件 i2c 是确定的引脚，软件 i2c gpio 可以在“/kernel/arch/mips/xburst/soc-t23/chip-t23/isvp/Pike/board.h ”中修改。



### adc转换器
Device Drivers > Multifunction device drivers标签

```
  │ │     [ ] Support PMIC DA9024 or D2041                                            │ │
  │ │     [ ] AMS AS3711                                                              │ │
  │ │     [ ] Analog Devices ADP5520/01 MFD PMIC Core Support                         │ │
  │ │     [ ] AnalogicTech AAT2870                                                    │ │
  │ │     < > ChromeOS Embedded Controller                                            │ │
  │ │     [ ] Dialog Semiconductor DA9030/DA9034 PMIC Support                         │ │
  │ │     [ ] Dialog Semiconductor DA9052/53 PMIC variants with I2C                   │ │
  │ │     [ ] Dialog Semiconductor DA9055 PMIC Support                                │ │
  │ │     < > Freescale MC13892 I2C interface                                         │ │
  │ │     < > HTC PASIC3 LED/DS1WM chip support                                       │ │
  │ │     [ ] HTC I2C PLD chip support                                                │ │
  │ │     <*> Support for the XBurst SADC core                                        │ │
  │ │     <*> Support for the XBurst SADC AUX                                         │ │
  │ │     <*> Support for XBurst TCU   
```


### tf卡和sdio的wifi
Device Drivers > MMC/SD/SDIO card support标签
```
 --- MMC/SD/SDIO card support                                                │ │
  │ │     [ ]   MMC debugging                                                         │ │
  │ │     [ ]   Assume MMC/SD cards are non-removable (DANGEROUS)                     │ │
  │ │     [*]   MMC host clock gating                                                 │ │
  │ │     [*]   MMC embedded SDIO device support (EXPERIMENTAL)                       │ │
  │ │     [ ]   Enable paranoid SD card initialization (EXPERIMENTAL)                 │ │
  │ │           *** MMC/SD/SDIO Card Drivers ***                                      │ │
  │ │     <*>   MMC block device driver                                               │ │
  │ │     (8)     Number of minors per block device                                   │ │
  │ │     [*]     Use bounce buffer for simple hosts                                  │ │
  │ │     [*]     Deferr MMC layer resume until I/O is requested                      │ │
  │ │     < >   SDIO UART/GPS class support                                           │ │
  │ │     <*>   MMC host test driver                                                  │ │
  │ │           *** MMC/SD/SDIO Host Controller Drivers ***                           │ │
  │ │     <*>   Ingenic(XBurst)  MMC/SD Card Controller(MSC) v1.2 support             │ │
  │ │             JZMMC_V12 data transfer method select (JZMMC_V12 data transfer using│ │
  │ │     [*]     JZMMC_V12 MMC0                                                      │ │
  │ │               JZMMC_V12 GPIO function pins select (GPIO B, data with 4 bit)  ---│ │
  │ │     (12000000) msc0 max frequency                                               │ │
  │ │     [ ]       Use PIO mode for MSC0                                             │ │
  │ │     [*]     JZMMC_V12 MMC1                                                      │ │
  │ │               JZMMC_V12 GPIO function pins select (GPIO B, Data width 4 bit)  --│ │
  │ │     (24000000) MSC1 max frequency                                               │ │
  │ │     [ ]       Use PIO mode for MSC1                                             │ │
  │ │     [ ]     JZMMC_V12 MMC2                                                      │ │
  │ │     < >   Secure Digital Host Controller Interface support                      │ │
  │ │     < >   VUB300 USB to SDIO/SD/MMC Host Controller support                     │ │
  │ │     < >   USB SD Host Controller (USHC) support                 
```

### pwm
Device Drivers > Pulse-Width Modulation (PWM) Support 标签
```
     --- Pulse-Width Modulation (PWM) Support                                    │ │
  │ │     <*>   JZ PWM driver                                                         │ │
  │ │     [*]     PWM channel0 Enable                                                 │ │
  │ │               PWM channel0 GPIO select (PWM channel0 PB17)  --->                │ │
  │ │     [ ]     PWM channel1 Enable                                                 │ │
  │ │     [ ]     PWM channel2 Enable                                                 │ │
  │ │     [ ]     PWM channel3 Enable                                                 │ │
  │ │                                      
```


### 文件系统
File systems 标签按需打开
```
   <*> Second extended fs support                                              │ │
  │ │     [ ]   Ext2 extended attributes                                              │ │
  │ │     [*]   Ext2 execute in place support                                         │ │
  │ │     < > Ext3 journalling file system support                                    │ │
  │ │     < > The Extended 4 (ext4) filesystem                                        │ │
  │ │     < > Reiserfs support                                                        │ │
  │ │     < > JFS filesystem support                                                  │ │
  │ │     < > XFS filesystem support                                                  │ │
  │ │     < > OCFS2 file system support                                               │ │
  │ │     < > Btrfs filesystem support                                                │ │
  │ │     < > NILFS2 file system support                                              │ │
  │ │     [*] Enable POSIX file locking API                                           │ │
  │ │     [*] Dnotify support                                                         │ │
  │ │     [*] Inotify support for userspace                                           │ │
  │ │     [ ] Filesystem wide access notification                                     │ │
  │ │     [ ] Quota support                                                           │ │
  │ │     < > Kernel automounter version 4 support (also supports v3)                 │ │
  │ │     <*> FUSE (Filesystem in Userspace) support                                  │ │
  │ │     < >   Character device in Userspace support                                 │ │
  │ │         Caches  --->                                                            │ │
  │ │         CD-ROM/DVD Filesystems  --->                                            │ │
  │ │         DOS/FAT/NT Filesystems  --->                                            │ │
  │ │         Pseudo filesystems  --->                                                │ │
  │ │     [*] Miscellaneous filesystems  --->                                         │ │
  │ │     [*] Network File Systems  --->                                              │ │
  │ │     -*- Native language support  --->                                           │ │
  │ │     < > Distributed Lock Manager (DLM)  --->      
```














