---
title: 
aliases: 
tags: 
description:
---

# 备注(声明)：
![RK3568（linux学习）/rk3568芯片开发/linux驱动入门/assets/第六期 平台总线/file-20250810171733727.png](assets/第六期%20平台总线/file-20250810171733727.png)



# 一、 项目用的

### 2.1 平台总线的架构
[[注册platefrom平台总线驱动.canvas|platform]]

- 2.1.1 [基础知识](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第六期_平台总线.one#基础知识&section-id={B3A45A72-B6D6-4A90-AB7D-90ED99801643}&page-id={F5C9752F-1A05-424C-8C41-6F854501229D}&end)

- 2.1.2 [2.平台总线的代码架构](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第六期_平台总线.one#2.平台总线的代码架构&section-id={B3A45A72-B6D6-4A90-AB7D-90ED99801643}&page-id={F83B90F2-3A73-47F0-8357-F79F6CC644B0}&end)   ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21se8c325913f784bf694d429e5ee2ab2be&id=documents&wd=target%28%E7%AC%AC%E5%85%AD%E6%9C%9F_%E5%B9%B3%E5%8F%B0%E6%80%BB%E7%BA%BF.one%7CB3A45A72-B6D6-4A90-AB7D-90ED99801643%2F2.%E5%B9%B3%E5%8F%B0%E6%80%BB%E7%BA%BF%E7%9A%84%E4%BB%A3%E7%A0%81%E6%9E%B6%E6%9E%84%7CF83B90F2-3A73-47F0-8357-F79F6CC644B0%2F%29))

- 2.1.3 [平台总线的思维导图](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第六期_平台总线.one#平台总线的思维导图&section-id={B3A45A72-B6D6-4A90-AB7D-90ED99801643}&page-id={D505F121-4F6D-4EC5-BC32-69B8CF2E478B}&end)

# 二、基础知识

## 函数API
### 1 platform设备加载和卸载函数
[“1.基础知识”页上的图片](onenote:#1.基础知识&section-id={B3A45A72-B6D6-4A90-AB7D-90ED99801643}&page-id={F5C9752F-1A05-424C-8C41-6F854501229D}&object-id={8884AC6A-C566-020B-308E-454AA127AEC6}&25&base-path=https://d.docs.live.net/52D4B76BB0FFCF51/Documents/\(RK3568\)Linux驱动开发/第六期_平台总线.one)

### 2 获取资源函数
[“1.基础知识”页上的图片](onenote:#1.基础知识&section-id={B3A45A72-B6D6-4A90-AB7D-90ED99801643}&page-id={F5C9752F-1A05-424C-8C41-6F854501229D}&object-id={33D632DC-7B52-0B89-303D-FA909A527C6E}&E&base-path=https://d.docs.live.net/52D4B76BB0FFCF51/Documents/\(RK3568\)Linux驱动开发/第六期_平台总线.one)




## 关键结构体

[[platform结构体间关系.canvas|platform结构体间关系]]


### 1 platfrom_driver
[“1.基础知识”页上的图片](onenote:#1.基础知识&section-id={B3A45A72-B6D6-4A90-AB7D-90ED99801643}&page-id={F5C9752F-1A05-424C-8C41-6F854501229D}&object-id={8884AC6A-C566-020B-308E-454AA127AEC6}&14&base-path=https://d.docs.live.net/52D4B76BB0FFCF51/Documents/\(RK3568\)Linux驱动开发/第六期_平台总线.one)

### 2 platfrom_device
[“1.基础知识”页上的图片](onenote:#1.基础知识&section-id={B3A45A72-B6D6-4A90-AB7D-90ED99801643}&page-id={F5C9752F-1A05-424C-8C41-6F854501229D}&object-id={28AC149E-016A-0B26-1808-1244407F5F60}&B&base-path=https://d.docs.live.net/52D4B76BB0FFCF51/Documents/\(RK3568\)Linux驱动开发/第六期_平台总线.one)

[“2.注册platform设备device.c”页上的图片](onenote:#2.注册platform设备device.c&section-id={B3A45A72-B6D6-4A90-AB7D-90ED99801643}&page-id={9C1B2F96-A489-448F-8BF0-37C25A9759F5}&object-id={86269AA8-E5B2-055B-3630-E5166B58D93A}&F&base-path=https://d.docs.live.net/52D4B76BB0FFCF51/Documents/\(RK3568\)Linux驱动开发/第六期_平台总线.one)
### 3 device
[“2.注册platform设备device.c”页上的图片](onenote:#2.注册platform设备device.c&section-id={B3A45A72-B6D6-4A90-AB7D-90ED99801643}&page-id={9C1B2F96-A489-448F-8BF0-37C25A9759F5}&object-id={86269AA8-E5B2-055B-3630-E5166B58D93A}&13&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第六期_平台总线.one)

在编写device这部分代码的时候,我们必须实现这个结构体里面的release函数
### 4 resource 结构体
[“2.注册platform设备device.c”页上的图片](onenote:#2.注册platform设备device.c&section-id={B3A45A72-B6D6-4A90-AB7D-90ED99801643}&page-id={9C1B2F96-A489-448F-8BF0-37C25A9759F5}&object-id={86269AA8-E5B2-055B-3630-E5166B58D93A}&15&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第六期_平台总线.one)

- **资源类型的种类-flags**
[“2.注册platform设备device.c”页上的图片](onenote:#2.注册platform设备device.c&section-id={B3A45A72-B6D6-4A90-AB7D-90ED99801643}&page-id={9C1B2F96-A489-448F-8BF0-37C25A9759F5}&object-id={86269AA8-E5B2-055B-3630-E5166B58D93A}&17&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第六期_平台总线.one)

- **举例说明**
[“2.注册platform设备device.c”页上的图片](onenote:#2.注册platform设备device.c&section-id={B3A45A72-B6D6-4A90-AB7D-90ED99801643}&page-id={9C1B2F96-A489-448F-8BF0-37C25A9759F5}&object-id={86269AA8-E5B2-055B-3630-E5166B58D93A}&21&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第六期_平台总线.one)




## 平台总线的架构

### 1 平台总线的驱动代码架构-  driver.c
[2.平台总线的代码架构](onenote:#2.平台总线的代码架构&section-id={B3A45A72-B6D6-4A90-AB7D-90ED99801643}&page-id={F83B90F2-3A73-47F0-8357-F79F6CC644B0}&end&base-path=https://d.docs.live.net/52D4B76BB0FFCF51/Documents/\(RK3568\)Linux驱动开发/第六期_平台总线.one)

- **平台总线代码架构的思维导图**
[[注册platefrom平台总线驱动.canvas|platform]]

### 2 注册platform设备实验的代码编写及现象 - device.c
[3.注册platform设备实验_基于RK3568](onenote:#3.注册platform设备实验_基于RK3568&section-id={B3A45A72-B6D6-4A90-AB7D-90ED99801643}&page-id={8AA697CC-E8DD-402E-AB89-C4600167B051}&end&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第六期_平台总线.one)



# 三、实验项目

## 编写led驱动
### 1 代码编写
[8.使用平台总线模型编写led驱动](onenote:#8.使用平台总线模型编写led驱动&section-id={B3A45A72-B6D6-4A90-AB7D-90ED99801643}&page-id={D3B78CC3-DB9F-4CE3-A1F6-6F3046BD5D34}&end&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第六期_平台总线.one)

### 2 实验现象
[9.使用平台总线模型编写led驱动实验_基于RK3568](onenote:#9.使用平台总线模型编写led驱动实验_基于RK3568&section-id={B3A45A72-B6D6-4A90-AB7D-90ED99801643}&page-id={9BD88192-4027-430A-B407-115A62661120}&end&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第六期_平台总线.one)

