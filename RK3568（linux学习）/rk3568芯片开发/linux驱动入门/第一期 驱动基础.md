---
title: 
aliases: 
tags: 
description:
---

# 备注(声明)：



# 大纲：
![RK3568（linux学习）/rk3568芯片开发/linux驱动入门/assets/第一期 驱动基础/file-20250810171735827.png](assets/第一期%20驱动基础/file-20250810171735827.png)
# 一、Linux驱动程序基础（内核模块）
## 简介:


## 补充：


## 1. Linux内核源码目录解析

[“3_初步认识Linux源码”页上的图片](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第一期_驱动基础.one#3_初步认识Linux源码&section-id={F6EC1735-9AD6-4EB6-B48F-6AFF2AADA112}&page-id={CA02A465-4FA4-44E6-9B0D-4FC1D4722AAA}&object-id={D6742EC4-37C4-48C1-9357-BBB3C87C2ACF}&21)  ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21se8c325913f784bf694d429e5ee2ab2be&id=documents&wd=target%28%E7%AC%AC%E4%B8%80%E6%9C%9F_%E9%A9%B1%E5%8A%A8%E5%9F%BA%E7%A1%80.one%7CF6EC1735-9AD6-4EB6-B48F-6AFF2AADA112%2F3_%E5%88%9D%E6%AD%A5%E8%AE%A4%E8%AF%86Linux%E6%BA%90%E7%A0%81%7CCA02A465-4FA4-44E6-9B0D-4FC1D4722AAA%2F%29&wdpartid=%7bCE263D08-F608-48D9-BBBC-12DB79FB2120%7d%7b1%7d&wdsectionfileid=52D4B76BB0FFCF51!sb8d9d2d7954f45f0acc8eb1d4509a9ba))

## 2.编写Linux驱动程序
### 2.1 最简单的Linux驱动结构
[“4_编写第一个驱动Helloworld”页上的图片](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第一期_驱动基础.one#4_编写第一个驱动Helloworld&section-id={F6EC1735-9AD6-4EB6-B48F-6AFF2AADA112}&page-id={0CE0E15A-415E-4F18-ADCC-7C0DB69CA3A4}&object-id={9323EFFB-EEBB-4700-B112-DBF989F14E37}&12)  ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21se8c325913f784bf694d429e5ee2ab2be&id=documents&wd=target%28%E7%AC%AC%E4%B8%80%E6%9C%9F_%E9%A9%B1%E5%8A%A8%E5%9F%BA%E7%A1%80.one%7CF6EC1735-9AD6-4EB6-B48F-6AFF2AADA112%2F4_%E7%BC%96%E5%86%99%E7%AC%AC%E4%B8%80%E4%B8%AA%E9%A9%B1%E5%8A%A8Helloworld%7C0CE0E15A-415E-4F18-ADCC-7C0DB69CA3A4%2F%29&wdpartid=%7b95FC74EE-E50D-4874-A36B-3F27483ECE98%7d%7b1%7d&wdsectionfileid=52D4B76BB0FFCF51!sb8d9d2d7954f45f0acc8eb1d4509a9ba))



## 3.编译Linux驱动程序
### 3.1 把驱动编译成内核模块
[“6_8_9_把驱动编译成内核模块（理论讲解）9_内核模块加载命令（理论讲解）”页上的图片](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第一期_驱动基础.one#6_8_9_把驱动编译成内核模块（理论讲解）9_内核模块加载命令（理论讲解）&section-id={F6EC1735-9AD6-4EB6-B48F-6AFF2AADA112}&page-id={72E7B293-79B1-409E-AB17-3FA5A7F5A577}&object-id={E5A5000F-1C04-4883-98E6-6E866C89081A}&AD)  ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21se8c325913f784bf694d429e5ee2ab2be&id=documents&wd=target%28%E7%AC%AC%E4%B8%80%E6%9C%9F_%E9%A9%B1%E5%8A%A8%E5%9F%BA%E7%A1%80.one%7CF6EC1735-9AD6-4EB6-B48F-6AFF2AADA112%2F6_8_9_%E6%8A%8A%E9%A9%B1%E5%8A%A8%E7%BC%96%E8%AF%91%E6%88%90%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%EF%BC%88%E7%90%86%E8%AE%BA%E8%AE%B2%E8%A7%A3%EF%BC%899_%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E5%8A%A0%E8%BD%BD%E5%91%BD%E4%BB%A4%EF%BC%88%E7%90%86%E8%AE%BA%E8%AE%B2%E8%A7%A3%EF%BC%89%7C72E7B293-79B1-409E-AB17-3FA5A7F5A577%2F%29&wdpartid=%7bFB6074E6-2C53-4884-84AA-D27CA92364B3%7d%7b1%7d&wdsectionfileid=52D4B76BB0FFCF51!sb8d9d2d7954f45f0acc8eb1d4509a9ba))
- 记得先配置好环境，在顶层的Makefile 固定环境变量。
[“6_8_9_把驱动编译成内核模块（理论讲解）9_内核模块加载命令（理论讲解）”页上的绘图](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第一期_驱动基础.one#6_8_9_把驱动编译成内核模块（理论讲解）9_内核模块加载命令（理论讲解）&section-id={F6EC1735-9AD6-4EB6-B48F-6AFF2AADA112}&page-id={72E7B293-79B1-409E-AB17-3FA5A7F5A577}&object-id={A60A42AD-F244-4532-AC4F-6202C5DB7E6F}&47)  ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21se8c325913f784bf694d429e5ee2ab2be&id=documents&wd=target%28%E7%AC%AC%E4%B8%80%E6%9C%9F_%E9%A9%B1%E5%8A%A8%E5%9F%BA%E7%A1%80.one%7CF6EC1735-9AD6-4EB6-B48F-6AFF2AADA112%2F6_8_9_%E6%8A%8A%E9%A9%B1%E5%8A%A8%E7%BC%96%E8%AF%91%E6%88%90%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%EF%BC%88%E7%90%86%E8%AE%BA%E8%AE%B2%E8%A7%A3%EF%BC%899_%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E5%8A%A0%E8%BD%BD%E5%91%BD%E4%BB%A4%EF%BC%88%E7%90%86%E8%AE%BA%E8%AE%B2%E8%A7%A3%EF%BC%89%7C72E7B293-79B1-409E-AB17-3FA5A7F5A577%2F%29&wdpartid=%7bFB6074E6-2C53-4884-84AA-D27CA92364B3%7d%7b1%7d&wdsectionfileid=52D4B76BB0FFCF51!sb8d9d2d7954f45f0acc8eb1d4509a9ba))

- 编写一个简单的Makefile
[“6_8_9_把驱动编译成内核模块（理论讲解）9_内核模块加载命令（理论讲解）”页上的图片](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第一期_驱动基础.one#6_8_9_把驱动编译成内核模块（理论讲解）9_内核模块加载命令（理论讲解）&section-id={F6EC1735-9AD6-4EB6-B48F-6AFF2AADA112}&page-id={72E7B293-79B1-409E-AB17-3FA5A7F5A577}&object-id={8D7E6D2A-6B21-4CC3-9224-6F9CF756864F}&E)  ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21se8c325913f784bf694d429e5ee2ab2be&id=documents&wd=target%28%E7%AC%AC%E4%B8%80%E6%9C%9F_%E9%A9%B1%E5%8A%A8%E5%9F%BA%E7%A1%80.one%7CF6EC1735-9AD6-4EB6-B48F-6AFF2AADA112%2F6_8_9_%E6%8A%8A%E9%A9%B1%E5%8A%A8%E7%BC%96%E8%AF%91%E6%88%90%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%EF%BC%88%E7%90%86%E8%AE%BA%E8%AE%B2%E8%A7%A3%EF%BC%899_%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E5%8A%A0%E8%BD%BD%E5%91%BD%E4%BB%A4%EF%BC%88%E7%90%86%E8%AE%BA%E8%AE%B2%E8%A7%A3%EF%BC%89%7C72E7B293-79B1-409E-AB17-3FA5A7F5A577%2F%29&wdpartid=%7bFB6074E6-2C53-4884-84AA-D27CA92364B3%7d%7b1%7d&wdsectionfileid=52D4B76BB0FFCF51!sb8d9d2d7954f45f0acc8eb1d4509a9ba))

- 操作内核模块的命令
[“6_8_9_把驱动编译成内核模块（理论讲解）9_内核模块加载命令（理论讲解）”页上的图片](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第一期_驱动基础.one#6_8_9_把驱动编译成内核模块（理论讲解）9_内核模块加载命令（理论讲解）&section-id={F6EC1735-9AD6-4EB6-B48F-6AFF2AADA112}&page-id={72E7B293-79B1-409E-AB17-3FA5A7F5A577}&object-id={A60A42AD-F244-4532-AC4F-6202C5DB7E6F}&29)  ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21se8c325913f784bf694d429e5ee2ab2be&id=documents&wd=target%28%E7%AC%AC%E4%B8%80%E6%9C%9F_%E9%A9%B1%E5%8A%A8%E5%9F%BA%E7%A1%80.one%7CF6EC1735-9AD6-4EB6-B48F-6AFF2AADA112%2F6_8_9_%E6%8A%8A%E9%A9%B1%E5%8A%A8%E7%BC%96%E8%AF%91%E6%88%90%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%EF%BC%88%E7%90%86%E8%AE%BA%E8%AE%B2%E8%A7%A3%EF%BC%899_%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E5%8A%A0%E8%BD%BD%E5%91%BD%E4%BB%A4%EF%BC%88%E7%90%86%E8%AE%BA%E8%AE%B2%E8%A7%A3%EF%BC%89%7C72E7B293-79B1-409E-AB17-3FA5A7F5A577%2F%29&wdpartid=%7bFB6074E6-2C53-4884-84AA-D27CA92364B3%7d%7b1%7d&wdsectionfileid=52D4B76BB0FFCF51!sb8d9d2d7954f45f0acc8eb1d4509a9ba))




### 3.2 将驱动编译到内核
[15_将驱动编译到内核（基于3568操作）](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第一期_驱动基础.one#15_将驱动编译到内核（基于3568操作）&section-id={F6EC1735-9AD6-4EB6-B48F-6AFF2AADA112}&page-id={B6038BAC-213C-4152-9CC6-486E2EB9C4FC}&end)  ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21se8c325913f784bf694d429e5ee2ab2be&id=documents&wd=target%28%E7%AC%AC%E4%B8%80%E6%9C%9F_%E9%A9%B1%E5%8A%A8%E5%9F%BA%E7%A1%80.one%7CF6EC1735-9AD6-4EB6-B48F-6AFF2AADA112%2F15_%E5%B0%86%E9%A9%B1%E5%8A%A8%E7%BC%96%E8%AF%91%E5%88%B0%E5%86%85%E6%A0%B8%EF%BC%88%E5%9F%BA%E4%BA%8E3568%E6%93%8D%E4%BD%9C%EF%BC%89%7CB6038BAC-213C-4152-9CC6-486E2EB9C4FC%2F%29&wdpartid=%7bB9F04DF2-832A-4F7D-BE0B-BECF3A3FBB9F%7d%7b1%7d&wdsectionfileid=52D4B76BB0FFCF51!sb8d9d2d7954f45f0acc8eb1d4509a9ba))



## 4、驱动模块传参

- 传参函数
[“16_驱动模块传参（1)”页上的图片](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第一期_驱动基础.one#16_驱动模块传参（1\)&section-id={F6EC1735-9AD6-4EB6-B48F-6AFF2AADA112}&page-id={C38BCC4D-58FC-496E-BECE-77C6D1C5F2B4}&object-id={BD09B45F-C92C-46E5-8452-E278CF6B89EE}&31)  ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21se8c325913f784bf694d429e5ee2ab2be&id=documents&wd=target%28%E7%AC%AC%E4%B8%80%E6%9C%9F_%E9%A9%B1%E5%8A%A8%E5%9F%BA%E7%A1%80.one%7CF6EC1735-9AD6-4EB6-B48F-6AFF2AADA112%2F16_%E9%A9%B1%E5%8A%A8%E6%A8%A1%E5%9D%97%E4%BC%A0%E5%8F%82%EF%BC%881%5C%29%7CC38BCC4D-58FC-496E-BECE-77C6D1C5F2B4%2F%29&wdpartid=%7b9BDB38E4-13BD-4140-B5BD-906B2952A3B3%7d%7b1%7d&wdsectionfileid=52D4B76BB0FFCF51!sb8d9d2d7954f45f0acc8eb1d4509a9ba))


- 实例编写
[17_在3568上进行驱动传参实验（实际操作）](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第一期_驱动基础.one#17_在3568上进行驱动传参实验（实际操作）&section-id={F6EC1735-9AD6-4EB6-B48F-6AFF2AADA112}&page-id={0DD5B792-9634-491A-80A5-39BF30FC3043}&end)  ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21se8c325913f784bf694d429e5ee2ab2be&id=documents&wd=target%28%E7%AC%AC%E4%B8%80%E6%9C%9F_%E9%A9%B1%E5%8A%A8%E5%9F%BA%E7%A1%80.one%7CF6EC1735-9AD6-4EB6-B48F-6AFF2AADA112%2F17_%E5%9C%A83568%E4%B8%8A%E8%BF%9B%E8%A1%8C%E9%A9%B1%E5%8A%A8%E4%BC%A0%E5%8F%82%E5%AE%9E%E9%AA%8C%EF%BC%88%E5%AE%9E%E9%99%85%E6%93%8D%E4%BD%9C%EF%BC%89%7C0DD5B792-9634-491A-80A5-39BF30FC3043%2F%29&wdpartid=%7b6D4903CE-53A8-4E9D-A30B-3AC8E150D32D%7d%7b1%7d&wdsectionfileid=52D4B76BB0FFCF51!sb8d9d2d7954f45f0acc8eb1d4509a9ba))



## 5.内核符号表导出
[“19_内核模块符号导出”页上的图片](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第一期_驱动基础.one#19_内核模块符号导出&section-id={F6EC1735-9AD6-4EB6-B48F-6AFF2AADA112}&page-id={CD74613B-B2CC-4497-90AF-51C66B4FE33A}&object-id={C358D913-E912-44C9-A792-348E71B28D7E}&29)  ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21se8c325913f784bf694d429e5ee2ab2be&id=documents&wd=target%28%E7%AC%AC%E4%B8%80%E6%9C%9F_%E9%A9%B1%E5%8A%A8%E5%9F%BA%E7%A1%80.one%7CF6EC1735-9AD6-4EB6-B48F-6AFF2AADA112%2F19_%E5%86%85%E6%A0%B8%E6%A8%A1%E5%9D%97%E7%AC%A6%E5%8F%B7%E5%AF%BC%E5%87%BA%7CCD74613B-B2CC-4497-90AF-51C66B4FE33A%2F%29&wdpartid=%7bB58A692A-C91C-477E-9ECF-EBE1A66C5194%7d%7b1%7d&wdsectionfileid=52D4B76BB0FFCF51!sb8d9d2d7954f45f0acc8eb1d4509a9ba))


# 二、menuconfig图形化配置界面
## 简介:


## 补充：


## 1.menuconfig图形化配置界面基本操作

[11_menuconfig图形化配置界面基本操作](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第一期_驱动基础.one#11_menuconfig图形化配置界面基本操作&section-id={F6EC1735-9AD6-4EB6-B48F-6AFF2AADA112}&page-id={E494A69F-1A78-43D4-B956-88004ED58C8D}&end)  ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21se8c325913f784bf694d429e5ee2ab2be&id=documents&wd=target%28%E7%AC%AC%E4%B8%80%E6%9C%9F_%E9%A9%B1%E5%8A%A8%E5%9F%BA%E7%A1%80.one%7CF6EC1735-9AD6-4EB6-B48F-6AFF2AADA112%2F11_menuconfig%E5%9B%BE%E5%BD%A2%E5%8C%96%E9%85%8D%E7%BD%AE%E7%95%8C%E9%9D%A2%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C%7CE494A69F-1A78-43D4-B956-88004ED58C8D%2F%29&wdpartid=%7b99561758-5254-47CB-8FEB-5D6DB16FBD72%7d%7b1%7d&wdsectionfileid=52D4B76BB0FFCF51!sb8d9d2d7954f45f0acc8eb1d4509a9ba))
### 1.1 Makefile,,config,Kconfig文件的关系
若.config存在，则界面配置为的选项为.config文件。若不存在，为Kfig的默认配置。config可以生成.config

[13_与图形化界面有关的文件](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第一期_驱动基础.one#13_与图形化界面有关的文件&section-id={F6EC1735-9AD6-4EB6-B48F-6AFF2AADA112}&page-id={23E8BCD1-8EDC-40F6-BF68-2865F57F5653}&end)   ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21se8c325913f784bf694d429e5ee2ab2be&id=documents&wd=target%28%E7%AC%AC%E4%B8%80%E6%9C%9F_%E9%A9%B1%E5%8A%A8%E5%9F%BA%E7%A1%80.one%7CF6EC1735-9AD6-4EB6-B48F-6AFF2AADA112%2F13_%E4%B8%8E%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%95%8C%E9%9D%A2%E6%9C%89%E5%85%B3%E7%9A%84%E6%96%87%E4%BB%B6%7C23E8BCD1-8EDC-40F6-BF68-2865F57F5653%2F%29&wdpartid=%7b43698572-CF69-4320-9061-E5B16B7EE305%7d%7b1%7d&wdsectionfileid=52D4B76BB0FFCF51!sb8d9d2d7954f45f0acc8eb1d4509a9ba))



## 2.Kconfig(图形化界面)语法讲解

[14_Kconfig(图形化界面)语法讲解](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第一期_驱动基础.one#14_Kconfig\(图形化界面\)语法讲解&section-id={F6EC1735-9AD6-4EB6-B48F-6AFF2AADA112}&page-id={A814BEAF-65F0-45E0-BBA9-B521278124BC}&end)  ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21se8c325913f784bf694d429e5ee2ab2be&id=documents&wd=target%28%E7%AC%AC%E4%B8%80%E6%9C%9F_%E9%A9%B1%E5%8A%A8%E5%9F%BA%E7%A1%80.one%7CF6EC1735-9AD6-4EB6-B48F-6AFF2AADA112%2F14_Kconfig%28%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%95%8C%E9%9D%A2%5C%29%E8%AF%AD%E6%B3%95%E8%AE%B2%E8%A7%A3%7CA814BEAF-65F0-45E0-BBA9-B521278124BC%2F%29&wdpartid=%7b69F08FC5-0C65-43A5-85F2-FFE631C75820%7d%7b1%7d&wdsectionfileid=52D4B76BB0FFCF51!sb8d9d2d7954f45f0acc8eb1d4509a9ba))








