---
title: 
aliases: 
tags: 
description:
---

# 备注(声明)：
![RK3568（linux学习）/rk3568芯片开发/linux驱动入门/设备树/assets/第七期 设备树/file-20250810171738782.png](assets/第七期%20设备树/file-20250810171738782.png)


<span style="background:#fdbfff">如果后面复习还是不知道函数怎么用，直接进入驱动开发指南手册中查找</span>
# 一、项目用的

## 1.设备树语法--->[1_设备树的思维导图](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one#1_设备树的思维导图&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={1A84A296-2055-48B5-933D-DBF988792583}&end)  ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21se8c325913f784bf694d429e5ee2ab2be&id=documents&wd=target%28%E7%AC%AC%E4%B8%83%E6%9C%9F_%E8%AE%BE%E5%A4%87%E6%A0%91.one%7C80573545-B553-4D68-95BF-8DF5F9A6A788%2F1_%E8%AE%BE%E5%A4%87%E6%A0%91%E7%9A%84%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE%7C1A84A296-2055-48B5-933D-DBF988792583%2F%29))

- 1.1 设备树基础语法

	[5_节点命名与常用属性](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one#5_节点命名与常用属性&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={C04DB3E0-24D6-4F38-B21E-194382C0C676}&end)    reg, #address-cell ,#size-cells ,status , compatible ,model

- 1.2 中断

	[7_中断-interrupt](onenote:https://d.docs.live.net/52D4B76BB0FFCF51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one#7_中断-interrupt&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={8D0891B3-AD9F-437B-9C8D-57586262E0E4}&end)    interrupt-parent ,interrupts

- 1.3 GPIO

	[11_GPIO date-gpios](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one#11_GPIO%20date-gpios&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={3B8EC367-6EDD-4D72-A8E7-00C4DF56ED74}&end)  ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21se8c325913f784bf694d429e5ee2ab2be&id=documents&wd=target%28%E7%AC%AC%E4%B8%83%E6%9C%9F_%E8%AE%BE%E5%A4%87%E6%A0%91.one%7C80573545-B553-4D68-95BF-8DF5F9A6A788%2F11_GPIO%20date-gpios%7C3B8EC367-6EDD-4D72-A8E7-00C4DF56ED74%2F%29))    date-gpios

- 1.4 pinctrl

	[14_pinctrl设置复用关系和电气属性](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one#14_pinctrl设置复用关系和电气属性&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={7F690014-BE7E-487B-B076-9A296EFFB165}&end)  pinctrl-name , pinctrl-0 , rockchip,pins

- 1.5 rk3568的设备树

	[rk3568 的设备树结构](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/문서/笔记梳理总结/@智能家居项目.one#rk3568%20的设备树结构&section-id={25BEEDC9-79A4-425B-801A-45A83B079EA6}&page-id={F65F80CF-06FA-46BE-87EA-A99CAD0FC2F7}&end)   ([Web 视图](https://onedrive.live.com/view.aspx?resid=52D4B76BB0FFCF51%21sc7b579081acd4a0b9d7cb44e8f49e04f&id=documents&wd=target%28%40%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85%E9%A1%B9%E7%9B%AE.one%7C25BEEDC9-79A4-425B-801A-45A83B079EA6%2Frk3568%20%E7%9A%84%E8%AE%BE%E5%A4%87%E6%A0%91%E7%BB%93%E6%9E%84%7CF65F80CF-06FA-46BE-87EA-A99CAD0FC2F7%2F%29))    kernel/arch/arm64/boot/dts/rockchip/

- 1.6 PWM   [设备树中PWM的使用](onenote:https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第十八期_PWM.one#设备树中PWM的使用&section-id={8DD134BB-D1A9-4D53-BF9D-0870D4E81CAF}&page-id={27094F76-08CE-4293-9A8A-5F64147C2C37}&end)



# 二、设备树的基本知识及语法

## 基本知识
### 1 设备树的作用
[“2_设备树背景与用处”页上的图片](onenote:#2_设备树背景与用处&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={0459DCFB-AC8B-4C8D-8EB0-0C1F7EFA3045}&object-id={96CD6E23-08B0-026E-2943-6AB998BA35FC}&13&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 2 常用名词解释
[“3_dts dtsi dtc dtb”页上的图片](onenote:#3_dts%20dtsi%20dtc%20dtb&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={C86FF97D-8095-4E3C-9D1D-58D333ED75CE}&object-id={8A4421BD-F6F2-420E-A474-455CB199150B}&1A&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

![RK3568（linux学习）/rk3568芯片开发/linux驱动入门/设备树/assets/第七期 设备树/file-20250810171739070.png](assets/第七期%20设备树/file-20250810171739070.png)
### 3 官方对设备树的讲解的文档 - devicetree-specification-v0.2.pdf
[“6_特殊节点与特殊属性”页上的图片](onenote:#6_特殊节点与特殊属性&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={0D32EAA8-36CC-4445-AEAC-3A5F7132F509}&object-id={4D73E553-4BB6-0D3B-0DFD-7A49FDFFF02B}&20&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)





## DTC的使用

### 1 内核设置编译DTC
[如果说大家把内核源码编译成功以后，没有得到BTC这个可执行文件](onenote:#4.DTC的使用&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={A6D83822-30AE-4FD8-8EDA-39470257FC37}&object-id={A688C145-3781-446D-B53F-DBA702494F89}&B1&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 2 找到DTC编译器
[在内核源码的这个路径下，我们可以找到BTC编译器](onenote:#4.DTC的使用&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={A6D83822-30AE-4FD8-8EDA-39470257FC37}&object-id={A688C145-3781-446D-B53F-DBA702494F89}&A3&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 3 DTC编译器命令格式
[“4.DTC的使用”页上的图片](onenote:#4.DTC的使用&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={A6D83822-30AE-4FD8-8EDA-39470257FC37}&object-id={A688C145-3781-446D-B53F-DBA702494F89}&6F&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)
- **编译设备树**
`/home/topeet/Linux/rk356x_linux/kernel/scripts/dtc/dtc -I dts -O dtb -o a.dtb test.dts

- **反编译设备树:**
你只<span style="background:#affad1">有DTB源码，你想看一下设备数原码长什么样子</span>。这时候呢，你就可以使用反编译。反编译就是将DTB文件。反编译成DTS文件
`/home/topeet/Linux/rk356x_linux/kernel/scripts/dtc/dtc -I dtb -O dts -o a.dts a.dtb





## 基本语法
### 1 节点命名与常用属性的含义
[5_节点命名与常用属性](onenote:#5_节点命名与常用属性&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={E5323611-144A-400E-9BD3-79A17A0858CB}&end&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

当你看不懂某个属性或者某个节点，可以从驱动入手

- **编写简单的设备树**
```
/dts-v1/;  // 设备树源文件版本声明

/ {  // 根节点开始

    model = "This is my devicetree!";  // 描述设备模型或名称的字符串

    #address-cells = <1>;  // 指定子节点地址属性中每个单元格的大小（32位）

    #size-cells = <1>;  // 指定子节点大小属性中每个单元格的大小（32位）

  

    node1 {  // 定义一个名为node1的子节点

        // 此处缺少内容，可能需要定义一些属性或子节点

    };

    node2 {  // 定义一个名为node2的子节点

        node1-child {  // node2下的一个子节点

            // 此处也缺少内容

        };

        led: gpio@22020101 {  // 定义一个GPIO控制的LED设备，命名为led

            compatible = "led";  // 兼容性字符串，用于匹配驱动程序

            reg = <0x20220101 0x40>;  // 寄存器地址和长度

            status = "okay";  // 表示设备状态良好，可以正常使用

        };

    };

    gpio@220201027 {  // 另一个GPIO控制器

        reg = <0x20220102 0x40>;  // 寄存器地址和长度

    };

};
```

### 2 特殊节点与特殊属性

#### 特殊节点aliases--->定义别名。
批量化的改名，方便于管理和区分

[“6_特殊节点与特殊属性”页上的图片](onenote:#6_特殊节点与特殊属性&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={0D32EAA8-36CC-4445-AEAC-3A5F7132F509}&object-id={4D73E553-4BB6-0D3B-0DFD-7A49FDFFF02B}&F&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

#### chosen节点--->uboot给内核传递参数
重点是bootarg参数。chosen节点必须是根节点的子节点

[“6_特殊节点与特殊属性”页上的图片](onenote:#6_特殊节点与特殊属性&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={0D32EAA8-36CC-4445-AEAC-3A5F7132F509}&object-id={4D73E553-4BB6-0D3B-0DFD-7A49FDFFF02B}&1A&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

#### device_type属性--->字符串,只用于cpu节点或者memory节点进行描述

[“6_特殊节点与特殊属性”页上的图片](onenote:#6_特殊节点与特殊属性&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={0D32EAA8-36CC-4445-AEAC-3A5F7132F509}&object-id={4D73E553-4BB6-0D3B-0DFD-7A49FDFFF02B}&1C&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

#### 自定义属性 --> 
<span style="background:#affad1">可以从驱动入手</span>，你可以<span style="background:#affad1">看一下它驱动中，到底对这些信息做了哪些操作</span>，这样你就明白这个属性或者这个节点，它是做什么用的。







# 三、设备树实例分析

## 中断
### 1 RK处理器中断节点实例
[“7_中断-interrupt”页上的图片](onenote:#7_中断-interrupt&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={8D0891B3-AD9F-437B-9C8D-57586262E0E4}&object-id={B9051E3F-069C-4FE4-9D38-971073746360}&28&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 2 使用中断方法
[“7_中断-interrupt”页上的图片](onenote:#7_中断-interrupt&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={8D0891B3-AD9F-437B-9C8D-57586262E0E4}&object-id={9D90AEE7-3CBB-0459-2267-658A0F282BCA}&35&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 3 ft5x芯片的驱动源码位置
[f t5 x这个芯片的驱动](onenote:#8_实践：描述中断-ft5x06&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={9FE33211-2574-4A84-BBFA-E6C9DA4983A1}&object-id={F461B46F-FC4C-4F8A-907D-720FA3D44EE3}&90&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)
[在内核源码中都是自带的](onenote:#8_实践：描述中断-ft5x06&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={9FE33211-2574-4A84-BBFA-E6C9DA4983A1}&object-id={F461B46F-FC4C-4F8A-907D-720FA3D44EE3}&92&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

<span style="background:#affad1">kernel/drivers/input/touchscreen/edt-ft5x06.c</span>
### 4 管脚宏定义位置
[“8_实践：描述中断-ft5x06”页上的图片](onenote:#8_实践：描述中断-ft5x06&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={9FE33211-2574-4A84-BBFA-E6C9DA4983A1}&object-id={F461B46F-FC4C-4F8A-907D-720FA3D44EE3}&43&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

<span style="background:#affad1">/kernel/include/dt-bindings/pinctrl/rockchip.h</span>
### 5、实践：描述中断-ft5x06
[8.实践：描述中断-ft5x06](onenote:#8.实践：描述中断-ft5x06&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={BC3C33E7-2919-4152-A98D-40E5745F6236}&end&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

```
/dts-v1/;  // 设备树源文件版本声明，表明这是使用设备树版本1规范编写的文件

#include "my_devicetree_core.dts";  // 包含另一个设备树源文件，通常用于共享公共定义或设置


// 下面是关于FT5X86触摸控制器的节点定义

ft5x86@38 {  // 定义一个名为ft5x86的设备节点，地址为38

    compatible = "edt-ft5x06";  // 兼容性字符串，用于匹配驱动程序，这里指明该设备与edt-ft5x06驱动兼容

    interrupt-parent = <&gpio3>;  // 中断父级引用，指明该设备使用的中断是由gpio3控制器处理的

    interrupts = <101 1>;  // 中断属性，第一个数字(101)是中断号，第二个数字(1)是触发类型(1表示上升沿触发)

};
```



## 时钟
大家只需要能看懂时钟节点，会修改时钟节点当中的时钟频率就可以了

### 1 时钟定义-生产者和消费者
[“9_时钟”页上的图片](onenote:#9_时钟&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={9E1737A2-678B-4A91-B988-43D25723A694}&object-id={2051EB06-A329-471F-99C4-903BF0A8D0EE}&12&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 2 生产者属性
- **#clock-cells**
[“9_时钟”页上的图片](onenote:#9_时钟&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={9E1737A2-678B-4A91-B988-43D25723A694}&object-id={2051EB06-A329-471F-99C4-903BF0A8D0EE}&24&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)
- **clock-output-names**
[“9_时钟”页上的图片](onenote:#9_时钟&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={9E1737A2-678B-4A91-B988-43D25723A694}&object-id={2051EB06-A329-471F-99C4-903BF0A8D0EE}&2E&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

- **clock-frequency**
[“9_时钟”页上的图片](onenote:#9_时钟&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={9E1737A2-678B-4A91-B988-43D25723A694}&object-id={2051EB06-A329-471F-99C4-903BF0A8D0EE}&37&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

- **assigned-clocks**
- **assigned-clock-rates**
[“9_时钟”页上的图片](onenote:#9_时钟&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={9E1737A2-678B-4A91-B988-43D25723A694}&object-id={2051EB06-A329-471F-99C4-903BF0A8D0EE}&40&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)


- **clock-indices**
[“9_时钟”页上的图片](onenote:#9_时钟&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={9E1737A2-678B-4A91-B988-43D25723A694}&object-id={2051EB06-A329-471F-99C4-903BF0A8D0EE}&46&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

- **assigned-clock-parents**
[“9_时钟”页上的图片](onenote:#9_时钟&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={9E1737A2-678B-4A91-B988-43D25723A694}&object-id={2051EB06-A329-471F-99C4-903BF0A8D0EE}&4F&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)


- **实例分析**
[“9_时钟”页上的图片](onenote:#9_时钟&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={9E1737A2-678B-4A91-B988-43D25723A694}&object-id={2051EB06-A329-471F-99C4-903BF0A8D0EE}&6A&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 3 消费者属性
<span style="background:#affad1">clocks属性和clock-names属性,用来指定使用的时钟源和消费者中时钟的名字</span>

[“9_时钟”页上的图片](onenote:#9_时钟&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={9E1737A2-678B-4A91-B988-43D25723A694}&object-id={2051EB06-A329-471F-99C4-903BF0A8D0EE}&58&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

- **实例分析**
[“9_时钟”页上的图片](onenote:#9_时钟&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={9E1737A2-678B-4A91-B988-43D25723A694}&object-id={2051EB06-A329-471F-99C4-903BF0A8D0EE}&61&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)




## CPU
大家只需要掌握cpu层次
结构的这些节点的层次关系就可以了
大家能够看得懂这些节点就足够了
### 1 CPU节点介绍:
[“10_CPU”页上的图片](onenote:#10_CPU&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={BAF8E597-C6C6-48A6-AFB2-3527359CB340}&object-id={734CD764-096F-4091-A92D-9057290E4BFE}&12&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 2 实例1:单核CPU
[“10_CPU”页上的图片](onenote:#10_CPU&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={BAF8E597-C6C6-48A6-AFB2-3527359CB340}&object-id={734CD764-096F-4091-A92D-9057290E4BFE}&25&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 3 实例2:四核CPU
[“10_CPU”页上的图片](onenote:#10_CPU&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={BAF8E597-C6C6-48A6-AFB2-3527359CB340}&object-id={734CD764-096F-4091-A92D-9057290E4BFE}&2E&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 4 实例3:四核A53+双核A72
[“10_CPU”页上的图片](onenote:#10_CPU&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={BAF8E597-C6C6-48A6-AFB2-3527359CB340}&object-id={734CD764-096F-4091-A92D-9057290E4BFE}&34&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 5、实例4:描述一个16核CPU群中有俩个集群，一个物理插槽，每个集，每个cpu里面有俩个线程
[“10_CPU”页上的图片](onenote:#10_CPU&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={BAF8E597-C6C6-48A6-AFB2-3527359CB340}&object-id={734CD764-096F-4091-A92D-9057290E4BFE}&46&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)


## GPIO
### 1 RK处理器GPI0节点实例
[“11_实例分析：GPIO”页上的图片](onenote:#11_实例分析：GPIO&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={72987DB5-0ED4-4785-A832-66E5AD785FEF}&object-id={4AD3FF02-DA6D-07FB-1FE0-4D0CC2EBD574}&14&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 2 使用总结:
[“11_实例分析：GPIO”页上的图片](onenote:#11_实例分析：GPIO&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={72987DB5-0ED4-4785-A832-66E5AD785FEF}&object-id={4AD3FF02-DA6D-07FB-1FE0-4D0CC2EBD574}&1A&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 3 其他属性
[“11_实例分析：GPIO”页上的图片](onenote:#11_实例分析：GPIO&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={72987DB5-0ED4-4785-A832-66E5AD785FEF}&object-id={4AD3FF02-DA6D-07FB-1FE0-4D0CC2EBD574}&1C&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 4 实践：描述GPIO-led

[12_实践：描述GPIO-led](onenote:#12_实践：描述GPIO-led&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={3D02A6F4-53E2-43E3-B5FB-C8FBD3B6C6B0}&end&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)


## pinctrl设置复用关系和电气属性
### 1 pinctrl语法
[“14_pinctrl设置复用关系和电气属性”页上的图片](onenote:#14_pinctrl设置复用关系和电气属性&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={7F690014-BE7E-487B-B076-9A296EFFB165}&object-id={CD582E1D-BCBD-09EE-3948-82AD34F87DE2}&51&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 2 实践：使用pinctrl设置管教复用关系
[15_实践：使用pinctrl设置管教复用关系](onenote:#15_实践：使用pinctrl设置管教复用关系&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={62D4FF1F-BFB1-4A3C-B4F2-00E57F3166A0}&end&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)



# 四、扩展

## pinmux-处理器上的引脚分布
### 1 原理图中对Pin脚的描述
[“13_pinmux-处理器上的引脚分布”页上的图片](onenote:#13_pinmux-处理器上的引脚分布&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={9584D88B-16EF-41E4-AC5E-9C2F233934E3}&object-id={41B71247-040E-4A8D-9647-D35A8C5E7692}&12&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 2 处理器的pin脚外观及定义图:
[“13_pinmux-处理器上的引脚分布”页上的图片](onenote:#13_pinmux-处理器上的引脚分布&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={9584D88B-16EF-41E4-AC5E-9C2F233934E3}&object-id={41B71247-040E-4A8D-9647-D35A8C5E7692}&24&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 3 pinmux的工作方式:
[“13_pinmux-处理器上的引脚分布”页上的图片](onenote:#13_pinmux-处理器上的引脚分布&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={9584D88B-16EF-41E4-AC5E-9C2F233934E3}&object-id={C4487E9B-E46A-4329-981F-FB4506AC381E}&38&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

那我们<span style="background:#d3f8b6">把它描述成gpl以后，我们肯定要把它的复用设置成gpl功能</span>呀
那我是不是就要<span style="background:#affad1">通过拼max，把这个引脚的功能设置成fashion 1</span>


## 如果内核源码中没有参考的节点

### 1 如果真没有，去看内核中的文档
[“15_实践：使用pinctrl设置管教复用关系”页上的图片](onenote:#15_实践：使用pinctrl设置管教复用关系&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={60298216-4B1B-42AD-A6FC-DEA1C98F4955}&object-id={BF9BA2B2-C4CD-08AE-1570-F831F0ED1324}&8C&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)





## bindings文档-了解厂家自定义的属性
<span style="background:#b1ffff">内核源码下Documentation/devicetree/bindings</span>
### 1 注意
<span style="background:#d3f8b6">我们在binging文件夹中找不到对应的文档，</span>
<span style="background:#d3f8b6">你可以去芯片原厂提供的资料中去找，</span>
<span style="background:#d3f8b6">看一看有没有说明</span>

### 2 位置
[“27_bindings文档-了解厂家自定义的属性”页上的图片](onenote:#27_bindings文档-了解厂家自定义的属性&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={3E976969-0F9E-4F5A-B9AC-5F6DB2FABEE0}&object-id={7B3DC759-2EB0-49D3-B2F6-DC8DA20FEB0A}&19&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

# 五、of操作函数

## of操作函数-获取设备树节点
### 1 device_node结构体- 描述一个设备树节点
[“22_of操作函数-获取设备树节点”页上的图片](onenote:#22_of操作函数-获取设备树节点&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={239456BA-1A28-4A41-AC8A-32EBF8D00BB1}&object-id={EE8DA925-3399-41CC-8FE1-A71411A281D8}&13&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

<span style="background:#affad1">一个device_node就代表一个设备节点</span>
### 2 查找节点函数
[“22_of操作函数-获取设备树节点”页上的图片](onenote:#22_of操作函数-获取设备树节点&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={239456BA-1A28-4A41-AC8A-32EBF8D00BB1}&object-id={EE8DA925-3399-41CC-8FE1-A71411A281D8}&1C&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 3 代码编写-查找节点
[“22_of操作函数-获取设备树节点”页上的图片](onenote:#22_of操作函数-获取设备树节点&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={239456BA-1A28-4A41-AC8A-32EBF8D00BB1}&object-id={52C5272F-F500-4792-9080-97B06E835995}&19&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)



## of操作函数-获取属性
<span style="background:#affad1">设备数，它最终会被转化成platform_device.</span>

### 1 property结构体- 描述一个属性
[“23_of操作函数-获取属性”页上的图片](onenote:#23_of操作函数-获取属性&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={A6583CB5-8533-408D-A83A-0A2282A013DE}&object-id={387B8BF8-4DE7-4C87-B6FD-8C5877BD3FEA}&13&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 2 获取节点下指定属性的参数的API函数

[“23_of操作函数-获取属性”页上的图片](onenote:#23_of操作函数-获取属性&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={A6583CB5-8533-408D-A83A-0A2282A013DE}&object-id={387B8BF8-4DE7-4C87-B6FD-8C5877BD3FEA}&20&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)


### 3 



## of操作函数-获取中断资源
### 1 从interupts属性中获取到对应的中断号的函数
[“26_of操作函数-获取中断资源”页上的图片](onenote:#26_of操作函数-获取中断资源&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={4A55C328-FBF1-4B24-B5F9-E06991A8214F}&object-id={4ECAB6A2-A04D-463E-A9D2-EECD0C5F54C6}&12&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 2 从interupts属性中获取到对应的中断标志的函数
[“26_of操作函数-获取中断资源”页上的图片](onenote:#26_of操作函数-获取中断资源&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={4A55C328-FBF1-4B24-B5F9-E06991A8214F}&object-id={4ECAB6A2-A04D-463E-A9D2-EECD0C5F54C6}&45&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 3 获取irq_data结构体的函数
[“26_of操作函数-获取中断资源”页上的图片](onenote:#26_of操作函数-获取中断资源&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={4A55C328-FBF1-4B24-B5F9-E06991A8214F}&object-id={4ECAB6A2-A04D-463E-A9D2-EECD0C5F54C6}&45&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 4 获取中断号的函数
[“26_of操作函数-获取中断资源”页上的图片](onenote:#26_of操作函数-获取中断资源&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={4A55C328-FBF1-4B24-B5F9-E06991A8214F}&object-id={A2FF615A-8F10-4652-989C-847BFA09C458}&11&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 5、实验代码编写及现象
[“26_of操作函数-获取中断资源”页上的图片](onenote:#26_of操作函数-获取中断资源&section-id={80573545-B553-4D68-95BF-8DF5F9A6A788}&page-id={4A55C328-FBF1-4B24-B5F9-E06991A8214F}&object-id={A2FF615A-8F10-4652-989C-847BFA09C458}&9A&base-path=https://d.docs.live.net/52d4b76bb0ffcf51/Documents/\(RK3568\)Linux驱动开发/第七期_设备树.one)

### 6 

